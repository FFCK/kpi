<?phpinclude_once('../commun/MyPage.php');include_once('../commun/MyBdd.php');include_once('../commun/MyTools.php');define('FPDF_FONTPATH','font/');require('../fpdf/fpdf.php');// Pieds de pageclass PDF extends FPDF{	function Footer()	{	    //Positionnement à 1,5 cm du bas	    $this->SetY(-15);	    //Police Arial italique 8	    $this->SetFont('Arial','I',8);	    //Numéro de page centré	    $this->Cell(0,10,'Page '.$this->PageNo(),0,0,'C');	}} // Gestion de la Feuille Instancesclass FeuilleInstances extends MyPage	 {		function FeuilleInstances()	{		MyPage::MyPage();                $myBdd = new MyBdd();		$idJournee = utyGetGet('idJournee', 0);		$idJournee = utyGetPost('idJournee', $idJournee);		//Chargement infos journées		$sql = "SELECT j.Id, j.Code_competition, j.Code_saison, j.Type, j.Phase, j.Niveau, j.Date_debut, j.Date_fin, 				j.Nom, j.Libelle, j.Lieu, j.Plan_eau, j.Departement, 				j.Responsable_insc, j.Responsable_R1, j.Organisateur, j.Delegue, j.ChefArbitre, j.Publication				FROM gickp_Journees j				WHERE Id = $idJournee ";				// TODO: Ajouter le représentant des chefs d'équipes, entraîneurs et compétiteurs				// TODO: Ajouter le représentant du président de la CNA (président du Jury d'appel) ?		//echo $sql;                $result = $myBdd->Query($sql);		$row = $myBdd->FetchArray($result, MYSQL_ASSOC);		$codeSaison = $row['Code_saison'];                $codeCompet = $row['Code_competition'];		$arrayCompetition = $myBdd->GetCompetition($codeCompet, $codeSaison);		$titreCompet = 'Compétition : '.$arrayCompetition['Libelle'].' ('.$codeCompet.')';		$qualif = $arrayCompetition['Qualifies'];		$elim = $arrayCompetition['Elimines'];				//Saison		$titreDate = "Saison ".$codeSaison;		// Langue		$langue = parse_ini_file("../commun/MyLang.ini", true);		if(utyGetGet('lang') == 'EN'){			$arrayCompetition['En_actif'] = 'O';                }elseif(utyGetGet('lang') == 'FR'){			$arrayCompetition['En_actif'] = '';                }			if($arrayCompetition['En_actif'] == 'O'){			$lang = $langue[EN];                }else{			$lang = $langue[FR];                }		//Création		$pdf = new FPDF('P');		$pdf->Open();		$pdf->SetTitle("Instances");				$pdf->SetAuthor("Poloweb.org");		$pdf->SetCreator("Poloweb.org avec FPDF");		$pdf->AddPage();		if($arrayCompetition['Sponsor_actif'] == 'O' && $sponsor != ''){			$pdf->SetAutoPageBreak(true, 40);                }else{			$pdf->SetAutoPageBreak(true, 15);                }		// logo		if($arrayCompetition['Kpi_ffck_actif'] == 'O')		{			$pdf->Image('../css/banniere1.jpg',10,10,0,12,'jpg',"http://www.kayak-polo.info");			$pdf->Image('../img/ffck2.jpg',163,10,0,12,'jpg',"http://www.ffck.org");		}		$logo = str_replace('http://www.kayak-polo.info/','../',$arrayCompetition['LogoLink']);		if($arrayCompetition['Logo_actif'] == 'O' && $logo != '')  //&& file_exists($logo)		{			$size = getimagesize($logo);			$largeur=$size[0];			$hauteur=$size[1];			$ratio=20/$hauteur;	//hauteur imposée de 20mm			$newlargeur=$largeur*$ratio;			$posi=105-($newlargeur/2);	//210mm = largeur de page			$pdf->image($logo, $posi, 8, 0,20);		}		$sponsor = str_replace('http://www.kayak-polo.info/','../',$arrayCompetition['SponsorLink']);		if($arrayCompetition['Sponsor_actif'] == 'O' && $sponsor != '')  //&& file_exists($sponsor)		{			$size = getimagesize($sponsor);			$largeur=$size[0];			$hauteur=$size[1];			$ratio=16/$hauteur;	//hauteur imposée de 16mm			$newlargeur=$largeur*$ratio;			$posi=105-($newlargeur/2);	//210mm = largeur de page			$pdf->image($sponsor, $posi, 274, 0,16);		}		// titre		$pdf->Ln(22);		$pdf->SetFont('Arial','B',14);		if($arrayCompetition['Titre_actif'] == 'O'){			$pdf->Cell(188,5,$arrayCompetition['Libelle'],0,1,'C');                }else{			$pdf->Cell(188,5,$arrayCompetition['Soustitre'],0,1,'C');                }                if($arrayCompetition['Soustitre2'] != ''){			$pdf->Cell(188,5,$arrayCompetition['Soustitre2'],0,1,'C');                }else{			$pdf->Cell(188,5,'('.$codeCompet.')',0,1,'C');                }                $pdf->Ln(12);		// Contenu		$pdf->SetFont('Arial','',12);                $pdf->Cell(94,7,$row['Nom'] ,0,0,'L');                $pdf->Cell(94,7, utyDateUsToFr($row['Date_debut']).' - '.utyDateUsToFr($row['Date_fin']) ,0,1,'R');                $pdf->Cell(94,7,'Responsable de compétition: '.$row['Responsable_insc'] ,0,0,'L');                $pdf->Cell(94,7,$row['Lieu'].' ('.$row['Departement'].')' ,0,1,'R');                $pdf->Ln(12);		$pdf->SetFont('Arial','B',14);                $pdf->Cell(188,12,'Comité de compétition' ,0,1,'C');		$pdf->SetFont('Arial','',12);                $pdf->Cell(94,10,'Responsable de l\'organisation (R1): ' ,0,0,'C');                $pdf->Cell(94,10,$row['Responsable_R1'] ,0,1,'C');                $pdf->Cell(94,10,'Délégué Commission Nationale d\'Activité: ' ,0,0,'C');                $pdf->Cell(94,10,$row['Delegue'] ,0,1,'C');                $pdf->Cell(94,10,'Chef des arbitres: ' ,0,0,'C');                $pdf->Cell(94,10,$row['ChefArbitre'] ,0,1,'C');                $pdf->Ln(20);		$pdf->SetFont('Arial','B',14);                $pdf->Cell(188,12,'Jury d\'Appel' ,0,1,'C');		$pdf->SetFont('Arial','',12);                $pdf->Cell(94,10,'Délégué C.N.A (président du Jury): ' ,0,0,'C');                $pdf->Cell(94,10,$row['Delegue'] ,0,1,'C');                $pdf->Cell(94,10,'Responsable de l\'organisation (R1): ' ,0,0,'C');                $pdf->Cell(94,10,$row['Responsable_R1'] ,0,1,'C');                $pdf->Cell(94,10,'Représentant des compétiteurs: ' ,0,0,'C');                $pdf->Cell(94,10,'' ,0,1,'C');					$pdf->Output('Instances '.$codeCompet,'I');	}}$page = new FeuilleInstances();